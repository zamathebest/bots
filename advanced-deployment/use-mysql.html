

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Use MySQL or PostgreSQL as Database &mdash; Bots EDI Translator 3.3.1.dev0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Bots EDI Translator 3.3.1.dev0 documentation" href="../index.html"/>
        <link rel="up" title="Advanced Deployment" href="index.html"/>
        <link rel="next" title="Using AS2 with Bots" href="use-as2.html"/>
        <link rel="prev" title="Use Apache2 as Webserver" href="use-apache2.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Bots EDI Translator
          

          
            
            <img src="../_static/botslogo_square2.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                3.3.1.dev0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../readme.html">Bots-Edi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Welcome to <code class="docutils literal"><span class="pre">Bots</span></code>&#8216;s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get-bots-running.html">Get Bots Running</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick-start-guide/index.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide-for-botsmonitor/index.html">Guide For Bots-Monitor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment/index.html">Deployment</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Advanced Deployment</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="user-rights.html">User Rights</a></li>
<li class="toctree-l2"><a class="reference internal" href="bots-https.html">Bots-Monitor over HTTPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="use-apache2.html">Use Apache2 as Webserver</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Use MySQL or PostgreSQL as Database</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#postgresql">PostgreSQL</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mysql">MySQL</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mysql-on-windows">MySQL on Windows</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="use-as2.html">Using AS2 with Bots</a></li>
<li class="toctree-l2"><a class="reference internal" href="change-management.html">Configuration Change Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="performance.html">Performance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../change-migrate/index.html">Changes and Migrate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../new-to-python.html">New to python?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../external-reference.html">External reference links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../useful-tools.html">Useful Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html">Bots Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html#credits">Credits</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Bots EDI Translator</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Advanced Deployment</a> &raquo;</li>
      
    <li>Use MySQL or PostgreSQL as Database</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/advanced-deployment/use-mysql.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="use-mysql-or-postgresql-as-database">
<h1>Use MySQL or PostgreSQL as Database<a class="headerlink" href="#use-mysql-or-postgresql-as-database" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>Default bots uses a SQLite database. This is included in the standard installation and works out-of-the-box. Performance of SQLite is good!</li>
<li>Bots always uses <code class="docutils literal"><span class="pre">utf-8</span></code> in the database communication.</li>
<li>Database tables are installed using <code class="docutils literal"><span class="pre">django-machinery</span></code>. See django docs.</li>
<li>After installation, you may want to <a class="reference internal" href="../change-migrate/migrate-db.html"><span class="doc">migrate some data</span></a>.</li>
<li>You might have to manually add a database trigger if using <a class="reference internal" href="../configuration/mapping-scripts/persist.html"><span class="doc">persist</span></a> functions.</li>
</ul>
<div class="section" id="postgresql">
<h2>PostgreSQL<a class="headerlink" href="#postgresql" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Install PostgreSQL.</p>
</li>
<li><p class="first">Install <code class="docutils literal"><span class="pre">psycopg2</span></code> as python database adapter.</p>
</li>
<li><p class="first">Login in command line client of database.</p>
</li>
<li><p class="first">Create database (CLI) : <code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">DATABASE</span> <span class="pre">botsdb</span> <span class="pre">WITH</span> <span class="pre">ENCODING</span> <span class="pre">'UTF8';</span></code></p>
</li>
<li><p class="first">Create user (CLI): <code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">USER</span> <span class="pre">bots</span> <span class="pre">WITH</span> <span class="pre">PASSWORD</span> <span class="pre">'botsbots';</span></code></p>
</li>
<li><p class="first">Give user rights (CLI): <code class="docutils literal"><span class="pre">GRANT</span> <span class="pre">ALL</span> <span class="pre">PRIVILEGES</span> <span class="pre">ON</span> <span class="pre">DATABASE</span> <span class="pre">botsdb</span> <span class="pre">TO</span> <span class="pre">bots;</span></code></p>
</li>
<li><p class="first">make sure database accepts connections over (non-local) TCP/IP: change parameter <code class="docutils literal"><span class="pre">listen_addresses</span></code> in <code class="docutils literal"><span class="pre">postgresql.conf</span></code>; add/change setting for user in <code class="docutils literal"><span class="pre">pg_hba.conf</span></code>.</p>
</li>
<li><p class="first">Set connection parameter in bots configuration in <code class="docutils literal"><span class="pre">bots/config/settings.py</span></code>. Examples are provided - see comments in <code class="docutils literal"><span class="pre">settings.py</span></code></p>
</li>
<li><dl class="first docutils">
<dt>Create the required tables (CLI):</dt>
<dd><ul class="first last simple">
<li>&lt;CLI&gt;: <code class="docutils literal"><span class="pre">django-admin</span> <span class="pre">syncdb</span> <span class="pre">--settings='bots.config.settings</span></code></li>
<li>Or when bots is not installed in the default directory &lt;CLI&gt;: <code class="docutils literal"><span class="pre">django-admin</span> <span class="pre">syncdb</span> <span class="pre">--pythonpath='path</span> <span class="pre">to</span> <span class="pre">bots'</span> <span class="pre">--settings='bots.config.settings'</span></code></li>
<li>Django asks for name etc of default user.</li>
</ul>
</dd>
</dl>
</li>
</ol>
</div>
<div class="section" id="mysql">
<h2>MySQL<a class="headerlink" href="#mysql" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Install MySQL.</p>
</li>
<li><p class="first">Install <code class="docutils literal"><span class="pre">mysql-Python</span></code> as python database adapter.</p>
</li>
<li><p class="first">Login in command line client of database.</p>
</li>
<li><p class="first">Create database (CLI): <code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">DATABASE</span> <span class="pre">botsdb</span> <span class="pre">DEFAULT</span> <span class="pre">CHARSET</span> <span class="pre">utf8;</span></code></p>
</li>
<li><p class="first">Create user (CLI): <code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">USER</span> <span class="pre">'bots'</span> <span class="pre">IDENTIFIED</span> <span class="pre">BY</span> <span class="pre">'botsbots';</span></code></p>
</li>
<li><p class="first">Give user rights (CLI): <code class="docutils literal"><span class="pre">GRANT</span> <span class="pre">ALL</span> <span class="pre">PRIVILEGES</span> <span class="pre">ON</span> <span class="pre">botsdb.*</span> <span class="pre">TO</span> <span class="pre">'bots';</span></code></p>
</li>
<li><p class="first">Make sure database accepts connections over (non-local) TCP/IP: change parameter <code class="docutils literal"><span class="pre">binds</span></code> in <code class="docutils literal"><span class="pre">/etc/mysql/my.cfg</span></code>.</p>
</li>
<li><p class="first">Set connection parameter in bots configuration in <code class="docutils literal"><span class="pre">bots/config/settings.py</span></code>. Examples are provided - see comments in <code class="docutils literal"><span class="pre">settings.py</span></code></p>
</li>
<li><dl class="first docutils">
<dt>Create the required tables:</dt>
<dd><ul class="first last simple">
<li>&lt;CLI&gt;: <code class="docutils literal"><span class="pre">django-admin</span> <span class="pre">syncdb</span> <span class="pre">--settings='bots.config.settings'</span></code></li>
<li>Or when bots is not installed in the default directory &lt;CLI&gt;: <code class="docutils literal"><span class="pre">django-admin</span> <span class="pre">syncdb</span> <span class="pre">--pythonpath='path</span> <span class="pre">to</span> <span class="pre">bots'</span> <span class="pre">--settings='bots.config.settings'</span></code></li>
<li>Django asks for name etc of default user.</li>
</ul>
</dd>
</dl>
</li>
</ol>
</div>
<div class="section" id="mysql-on-windows">
<h2>MySQL on Windows<a class="headerlink" href="#mysql-on-windows" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Download <a class="reference external" href="http://www.mysql.com/downloads/mysql/">MySQL community server</a> msi installer. (tested version 5.5.20)</p>
</li>
<li><p class="first">Run the installer, do a <strong>typical</strong> installation and follow the prompts. On the final screen, make sure <em>Launch the MySQL Instance Configuration Wizard</em> box is ticked.</p>
</li>
<li><dl class="first docutils">
<dt>When the configuration wizard starts, make the following selections:</dt>
<dd><ul class="first last simple">
<li>Detailed configuration</li>
<li>Server machine (you may choose developer for your bots test environment)</li>
<li>Transactional database</li>
<li>DSS/OLAP (20 connections)</li>
<li>Enable TCP/IP and Strict mode (defaults)</li>
<li>Best support for multilingualism (<strong>UTF8</strong>)</li>
<li>Install as Windows service (default)</li>
<li>Modify security settings; enter a root password and write it down.</li>
<li>Execute configuration</li>
<li>Create a shortcut to <code class="docutils literal"><span class="pre">C:\Program</span> <span class="pre">Files\MySQL\MySQL</span> <span class="pre">Server</span> <span class="pre">5.5\bin\MySQLInstanceConfig.exe</span></code> in case you want to modify any of these settings later.</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Go to <code class="docutils literal"><span class="pre">Start</span> <span class="pre">&gt;</span> <span class="pre">Programs</span> <span class="pre">&gt;</span> <span class="pre">MySQL</span> <span class="pre">&gt;</span> <span class="pre">MySQL</span> <span class="pre">Server</span> <span class="pre">&gt;</span> <span class="pre">MySQL</span> <span class="pre">Command</span> <span class="pre">Line</span> <span class="pre">Client</span></code>. Enter your root password when prompted. You should now have a <code class="docutils literal"><span class="pre">mysql&gt;</span></code> command prompt.</p>
</li>
<li><p class="first">Enter the following MySQL commands at the prompt:</p>
<blockquote>
<div><div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">CREATE</span> <span class="n">DATABASE</span> <span class="n">botsdb</span> <span class="n">DEFAULT</span> <span class="n">CHARSET</span> <span class="n">utf8</span><span class="p">;</span>
 <span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">1</span> <span class="n">row</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.01</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">CREATE</span> <span class="n">USER</span> <span class="s1">&#39;bots&#39;</span> <span class="n">IDENTIFIED</span> <span class="n">BY</span> <span class="s1">&#39;botsbots&#39;</span><span class="p">;</span>
 <span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">GRANT</span> <span class="n">ALL</span> <span class="n">ON</span> <span class="n">botsdb</span><span class="o">.*</span> <span class="n">TO</span> <span class="s1">&#39;bots&#39;</span><span class="p">;</span>
 <span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.03</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Download and install <a class="reference external" href="http://www.codegood.com/downloads">MySQL-python for Windows</a> to suit your python version (tested <code class="docutils literal"><span class="pre">MySQL-python-1.2.3.win32-py2.7.exe</span></code>)</p>
</li>
<li><p class="first">Set connection parameters in bots configuration in <code class="docutils literal"><span class="pre">bots/config/settings.py</span></code>. MySQL example is provided, I only changed HOST.</p>
<blockquote>
<div><div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1">#MySQL:</span>
<span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;django.db.backends.mysql&#39;</span><span class="p">,</span>
        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;botsdb&#39;</span><span class="p">,</span>
        <span class="s1">&#39;USER&#39;</span><span class="p">:</span> <span class="s1">&#39;bots&#39;</span><span class="p">,</span>
        <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s1">&#39;botsbots&#39;</span><span class="p">,</span>
        <span class="s1">&#39;HOST&#39;</span><span class="p">:</span> <span class="s1">&#39;localhost&#39;</span><span class="p">,</span>  <span class="c1">#database is on same server as Bots</span>
        <span class="s1">&#39;PORT&#39;</span><span class="p">:</span> <span class="s1">&#39;3306&#39;</span><span class="p">,</span>
        <span class="s1">&#39;OPTIONS&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;use_unicode&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span><span class="s1">&#39;charset&#39;</span><span class="p">:</span><span class="s1">&#39;utf8&#39;</span><span class="p">,</span><span class="s1">&#39;init_command&#39;</span><span class="p">:</span> <span class="s1">&#39;SET storage_engine=INNODB&#39;</span><span class="p">},</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Create the required tables from a command prompt. Django asks for name etc of superuser. (enter user: bots, password: botsbots)</p>
<blockquote>
<div><div class="code console highlight-default"><div class="highlight"><pre><span></span>&gt; D:\python27\python.exe D:\Python27\lib\site-packages\django\bin\django-admin.py syncdb
  --settings=bots.config.settings

Creating tables ...
Creating table auth_permission
Creating table auth_group_permissions
Creating table auth_group
Creating table auth_user_user_permissions
Creating table auth_user_groups
Creating table auth_user
Creating table auth_message
Creating table django_content_type
Creating table django_session
Creating table django_admin_log
Creating table confirmrule
Creating table ccodetrigger
Creating table ccode
Creating table channel
Creating table partnergroup
Creating table partner
Creating table chanpar
Creating table translate
Creating table routes
Creating table filereport
Creating table mutex
Creating table persist
Creating table report
Creating table ta
Creating table uniek

You just installed Django&#39;s auth system, which means you don&#39;t have any superusers defined.
Would you like to create one now? (yes/no): yes
Username (Leave blank to use &#39;mike&#39;): bots
E-mail address: bots@bots.com
Password: botsbots
Password (again): botsbots
Superuser created successfully.
Installing custom SQL ...
Installing indexes ...
No fixtures found.
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Now start bots-webserver and log in as bots.</p>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The database is stored in C:/ProgramData/MySQL/MySQL Server 5.5/Data/ by default (on Windows 7). To move the database, do the following</p>
<ol class="last arabic">
<li><p class="first">Stop the MySQL service</p>
</li>
<li><p class="first">Move the <code class="docutils literal"><span class="pre">/Data/</span></code> folder only to your required location (eg. <code class="docutils literal"><span class="pre">D:/MySQL</span> <span class="pre">Server</span> <span class="pre">5.5/Data/</span></code>)</p>
</li>
<li><p class="first">Make sure the permissions are moved with it. <code class="docutils literal"><span class="pre">NETWORK</span> <span class="pre">SERVCE</span></code> must have full control</p>
</li>
<li><p class="first">Change the setting <code class="docutils literal"><span class="pre">datadir</span></code> in <code class="docutils literal"><span class="pre">C:/ProgramData/MySQL/MySQL</span> <span class="pre">Server</span> <span class="pre">5.5/my.ini</span></code> to indicate the new folder location</p>
<blockquote>
<div><div class="code highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Path to the database root</span>
<span class="n">datadir</span><span class="o">=</span><span class="n">D</span><span class="p">:</span><span class="o">/</span><span class="n">MySQL</span> <span class="n">Server</span> <span class="mf">5.5</span><span class="o">/</span><span class="n">Data</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Restart the MySQL service. If it will not start, check permissions!</p>
</li>
</ol>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="use-as2.html" class="btn btn-neutral float-right" title="Using AS2 with Bots" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="use-apache2.html" class="btn btn-neutral" title="Use Apache2 as Webserver" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2007 - 2016, Henk-Jan Ebbers.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'3.3.1.dev0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>